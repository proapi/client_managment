<% content_for :section_header do %>
    Historia zmian klienta
<% end %>

<% content_for :history do %>
    <%= link_to "Strona główna", root_url %> / <%= link_to "Szczegóły klienta", client_path(@client) %> / <%= link_to "Historia klienta", history_client_path(@client) %> / <%= link_to 'Wstecz', :back %>
<% end %>

<% content_for :help do %>
    <% help_block 'Podgląd danych historycznych klienta' %>
<% end %>

<% content_for :main_menu do %>
    <% render 'main_menu' %>
<% end %>

<p>
  Ilość wpisów w historii klienta: <%= @client.audits.size %>
</p>
<% @client.audits.reverse.each do |audit| %>
    <div class="table">
      <table class="listing form" cellpadding="0" cellspacing="0">
        <tr>
          <th class="full" colspan="2">Wersja <%= audit.version %></th>
        </tr>
        <tr>
          <td>Akcja</td>
          <td><strong><%= audit.action %></strong></td>
        </tr>
        <tr>
          <td>Zmiany</td>
          <td><strong><%= audit.audited_changes %></strong></td>
        </tr>
        <tr>
          <td>Komentarz</td>
          <td><strong><%= audit.comment %></strong></td>
        </tr>
        <tr>
          <td>Autor</td>
          <td><strong><%= audit.user.name %></strong></td>
        </tr>
        <tr>
          <td>Data</td>
          <td><strong><%= audit.created_at %></strong></td>
        </tr>
      </table>
    </div>
    <%# audit.revision.inspect %><%# zwraca instancję obiektu zmienione w chwili zmiany %>
<% end %>